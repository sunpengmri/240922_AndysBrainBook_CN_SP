<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUMA Tutorial #4: Group Analysis &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SUMA Tutorial #5: Region of Interest Analysis" href="SUMA_05_ROIAnalysisOnTheSurface.html" />
    <link rel="prev" title="SUMA Tutorial #3: Analysis on the Surface" href="SUMA_03_AnalysisOnTheSurface.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../AFNI_Overview.html">AFNI Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../AFNI_Overview.html#what-is-afni">What is AFNI?</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../AFNI_fMRI_Intro.html">Introduction to AFNI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_01_DataDownload.html">AFNI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_02_ExperimentalDesign.html">AFNI Tutorial #2: The Flanker Experiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_03_LookingAtTheData.html">AFNI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_04_Preprocessing.html">AFNI Tutorial #4: AFNI Commands and Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_05_1stLevelAnalysis.html">AFNI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_06_Scripting.html">AFNI Tutorial #6: Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_07_GroupAnalysis.html">AFNI Tutorial #7: Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AFNI_08_ROIAnalysis.html">AFNI Tutorial #8: ROI Analysis</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../AFNI_09_SurfaceAnalysis.html">AFNI Tutorial #9: Surface-Based Analysis with SUMA</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="SUMA_01_ReconSurface.html">SUMA Tutoral #1: Reconstructing the Cortical Surface</a></li>
<li class="toctree-l4"><a class="reference internal" href="SUMA_02_MakeSpec_AlignExp.html">SUMA Tutorial #2: &#64;SUMA_Make_Spec_FS and &#64;SUMA_AlignToExperiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="SUMA_03_AnalysisOnTheSurface.html">SUMA Tutorial #3: Analysis on the Surface</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">SUMA Tutorial #4: Group Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="SUMA_05_ROIAnalysisOnTheSurface.html">SUMA Tutorial #5: Region of Interest Analysis</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../AppendixA_ParametricModulation.html">Appendix A: Parametric Modulation in AFNI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AppendixB_AnimalAnalysis.html">Appendix B: Analyzing Rat Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AppendixC_HighlightingResults.html">Appendix C: Highlighting Vs. Hiding Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AppendixD_EffectSizes.html">Appendix D: Reporting Effect Sizes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ML/ML_Overview.html">Machine Learning for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../AFNI_Overview.html">AFNI Overview</a></li>
          <li class="breadcrumb-item"><a href="../AFNI_09_SurfaceAnalysis.html">AFNI Tutorial #9: Surface-Based Analysis with SUMA</a></li>
      <li class="breadcrumb-item active">SUMA Tutorial #4: Group Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/AFNI/AFNI_Short_Course/SUMA/SUMA_04_GroupAnalysisOnTheSurface.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="suma-tutorial-4-group-analysis">
<span id="suma-04-groupanalysisonthesurface"></span><h1>SUMA Tutorial #4: Group Analysis<a class="headerlink" href="#suma-tutorial-4-group-analysis" title="Link to this heading"></a></h1>
<hr class="docutils" />
<p>As with our <a class="reference internal" href="../AFNI_07_GroupAnalysis.html#afni-07-groupanalysis"><span class="std std-ref">group analysis of the volumetric data</span></a>, we can average the contrast estimates over all of our subjects and display them on a template brain. See the <a class="reference internal" href="SUMA_03_AnalysisOnTheSurface.html#suma-03-analysisonthesurface"><span class="std std-ref">last tutorial</span></a> for instructions on how to download and unpack this template brain if you have not already done so.</p>
<p>We can adapt the same uber_ttest.py script we created during the volumetric group analyses to analyze the surface data, making sure to append the string <code class="docutils literal notranslate"><span class="pre">.niml.dset</span></code> to the output in order to indicate that it is a surface file that can be read by SUMA. The framework of the t-test is the same: We load each subject’s statistics file and specify the sub-brik that we want to contrast. (If you recall from viewing the individual subject results, sub-brik #10 represents the contrast estimate for Incongruent-Congruent.) We then do this for both the left and right hemispheres, since we have run separate GLMs for each side of the brain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#Left Hemisphere

set dirA = $PWD

# specify and possibly create results directory
set results_dir = test.results
if ( ! -d $results_dir ) mkdir $results_dir

# ------------------------- process the data -------------------------

3dttest++ -prefix $results_dir/Flanker_Inc-Con_ttest.lh.niml.dset               \
        -setA Inc-Con                                            \
           01 &quot;$dirA/sub-01/sub-01.results_SUMA/stats.sub-01.lh.niml.dset[10]&quot; \
           02 &quot;$dirA/sub-02/sub-02.results_SUMA/stats.sub-02.lh.niml.dset[10]&quot; \
           03 &quot;$dirA/sub-03/sub-03.results_SUMA/stats.sub-03.lh.niml.dset[10]&quot; \
           04 &quot;$dirA/sub-04/sub-04.results_SUMA/stats.sub-04.lh.niml.dset[10]&quot; \
           05 &quot;$dirA/sub-05/sub-05.results_SUMA/stats.sub-05.lh.niml.dset[10]&quot; \
           06 &quot;$dirA/sub-06/sub-06.results_SUMA/stats.sub-06.lh.niml.dset[10]&quot; \
           07 &quot;$dirA/sub-07/sub-07.results_SUMA/stats.sub-07.lh.niml.dset[10]&quot; \
           08 &quot;$dirA/sub-08/sub-08.results_SUMA/stats.sub-08.lh.niml.dset[10]&quot; \
           09 &quot;$dirA/sub-09/sub-09.results_SUMA/stats.sub-09.lh.niml.dset[10]&quot; \
           10 &quot;$dirA/sub-10/sub-10.results_SUMA/stats.sub-10.lh.niml.dset[10]&quot; \
           11 &quot;$dirA/sub-11/sub-11.results_SUMA/stats.sub-11.lh.niml.dset[10]&quot; \
           12 &quot;$dirA/sub-12/sub-12.results_SUMA/stats.sub-12.lh.niml.dset[10]&quot; \
           13 &quot;$dirA/sub-13/sub-13.results_SUMA/stats.sub-13.lh.niml.dset[10]&quot; \
           14 &quot;$dirA/sub-14/sub-14.results_SUMA/stats.sub-14.lh.niml.dset[10]&quot; \
           15 &quot;$dirA/sub-15/sub-15.results_SUMA/stats.sub-15.lh.niml.dset[10]&quot; \
           16 &quot;$dirA/sub-16/sub-16.results_SUMA/stats.sub-16.lh.niml.dset[10]&quot; \
           17 &quot;$dirA/sub-17/sub-17.results_SUMA/stats.sub-17.lh.niml.dset[10]&quot; \
           18 &quot;$dirA/sub-18/sub-18.results_SUMA/stats.sub-18.lh.niml.dset[10]&quot; \
           19 &quot;$dirA/sub-19/sub-19.results_SUMA/stats.sub-19.lh.niml.dset[10]&quot; \
           20 &quot;$dirA/sub-20/sub-20.results_SUMA/stats.sub-20.lh.niml.dset[10]&quot; \
           21 &quot;$dirA/sub-21/sub-21.results_SUMA/stats.sub-21.lh.niml.dset[10]&quot; \
           22 &quot;$dirA/sub-22/sub-22.results_SUMA/stats.sub-22.lh.niml.dset[10]&quot; \
           23 &quot;$dirA/sub-23/sub-23.results_SUMA/stats.sub-23.lh.niml.dset[10]&quot; \
           24 &quot;$dirA/sub-24/sub-24.results_SUMA/stats.sub-24.lh.niml.dset[10]&quot; \
           25 &quot;$dirA/sub-25/sub-25.results_SUMA/stats.sub-25.lh.niml.dset[10]&quot; \
           26 &quot;$dirA/sub-26/sub-26.results_SUMA/stats.sub-26.lh.niml.dset[10]&quot;

#Right Hemisphere

 3dttest++ -prefix $results_dir/Flanker_Inc-Con_ttest.rh.niml.dset               \
        -setA Inc-Con                                            \
           01 &quot;$dirA/sub-01/sub-01.results_SUMA/stats.sub-01.rh.niml.dset[10]&quot; \
           02 &quot;$dirA/sub-02/sub-02.results_SUMA/stats.sub-02.rh.niml.dset[10]&quot; \
           03 &quot;$dirA/sub-03/sub-03.results_SUMA/stats.sub-03.rh.niml.dset[10]&quot; \
           04 &quot;$dirA/sub-04/sub-04.results_SUMA/stats.sub-04.rh.niml.dset[10]&quot; \
           05 &quot;$dirA/sub-05/sub-05.results_SUMA/stats.sub-05.rh.niml.dset[10]&quot; \
           06 &quot;$dirA/sub-06/sub-06.results_SUMA/stats.sub-06.rh.niml.dset[10]&quot; \
           07 &quot;$dirA/sub-07/sub-07.results_SUMA/stats.sub-07.rh.niml.dset[10]&quot; \
           08 &quot;$dirA/sub-08/sub-08.results_SUMA/stats.sub-08.rh.niml.dset[10]&quot; \
           09 &quot;$dirA/sub-09/sub-09.results_SUMA/stats.sub-09.rh.niml.dset[10]&quot; \
           10 &quot;$dirA/sub-10/sub-10.results_SUMA/stats.sub-10.rh.niml.dset[10]&quot; \
           11 &quot;$dirA/sub-11/sub-11.results_SUMA/stats.sub-11.rh.niml.dset[10]&quot; \
           12 &quot;$dirA/sub-12/sub-12.results_SUMA/stats.sub-12.rh.niml.dset[10]&quot; \
           13 &quot;$dirA/sub-13/sub-13.results_SUMA/stats.sub-13.rh.niml.dset[10]&quot; \
           14 &quot;$dirA/sub-14/sub-14.results_SUMA/stats.sub-14.rh.niml.dset[10]&quot; \
           15 &quot;$dirA/sub-15/sub-15.results_SUMA/stats.sub-15.rh.niml.dset[10]&quot; \
           16 &quot;$dirA/sub-16/sub-16.results_SUMA/stats.sub-16.rh.niml.dset[10]&quot; \
           17 &quot;$dirA/sub-17/sub-17.results_SUMA/stats.sub-17.rh.niml.dset[10]&quot; \
           18 &quot;$dirA/sub-18/sub-18.results_SUMA/stats.sub-18.rh.niml.dset[10]&quot; \
           19 &quot;$dirA/sub-19/sub-19.results_SUMA/stats.sub-19.rh.niml.dset[10]&quot; \
           20 &quot;$dirA/sub-20/sub-20.results_SUMA/stats.sub-20.rh.niml.dset[10]&quot; \
           21 &quot;$dirA/sub-21/sub-21.results_SUMA/stats.sub-21.rh.niml.dset[10]&quot; \
           22 &quot;$dirA/sub-22/sub-22.results_SUMA/stats.sub-22.rh.niml.dset[10]&quot; \
           23 &quot;$dirA/sub-23/sub-23.results_SUMA/stats.sub-23.rh.niml.dset[10]&quot; \
           24 &quot;$dirA/sub-24/sub-24.results_SUMA/stats.sub-24.rh.niml.dset[10]&quot; \
           25 &quot;$dirA/sub-25/sub-25.results_SUMA/stats.sub-25.rh.niml.dset[10]&quot; \
           26 &quot;$dirA/sub-26/sub-26.results_SUMA/stats.sub-26.rh.niml.dset[10]&quot;
</pre></div>
</div>
<p>Once this code has been run, you can view the results on the surface template, opening a new viewer for each hemisphere (and making sure that the <code class="docutils literal notranslate"><span class="pre">-spec</span></code> file matches the hemisphere you are viewing):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">suma</span> <span class="o">-</span><span class="n">spec</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">std</span><span class="mf">.141</span><span class="o">.</span><span class="n">MNI_N27_rh</span><span class="o">.</span><span class="n">spec</span> <span class="o">-</span><span class="n">sv</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">MNI_N27_SurfVol</span><span class="o">.</span><span class="n">nii</span> <span class="o">-</span><span class="nb">input</span> <span class="n">Flanker_Inc</span><span class="o">-</span><span class="n">Con_ttest</span><span class="o">.</span><span class="n">rh</span><span class="o">.</span><span class="n">niml</span><span class="o">.</span><span class="n">dset</span>

<span class="n">suma</span> <span class="o">-</span><span class="n">spec</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">std</span><span class="mf">.141</span><span class="o">.</span><span class="n">MNI_N27_lh</span><span class="o">.</span><span class="n">spec</span> <span class="o">-</span><span class="n">sv</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">MNI_N27_SurfVol</span><span class="o">.</span><span class="n">nii</span> <span class="o">-</span><span class="nb">input</span> <span class="n">Flanker_Inc</span><span class="o">-</span><span class="n">Con_ttest</span><span class="o">.</span><span class="n">lh</span><span class="o">.</span><span class="n">niml</span><span class="o">.</span><span class="n">dset</span>
</pre></div>
</div>
<p>If you compare the surface results to the volumetric results, you will see that a significant effect of Inc-Con is in roughly the same area: The pre-supplementary motor area, or pre-SMA. However, the surface results are stronger (a peak t-statistic in the right hemisphere of 5.079 compared to 4.44 for the volumetric results, for example), and you are able to see where the activation traces the gyri and sulci of the brain. The surface-based figures not only look better, but allow you to see more nuances in the data as well.</p>
<figure class="align-default">
<img alt="../../../_images/09_04_Surface_Volumetric_Results.png" src="../../../_images/09_04_Surface_Volumetric_Results.png" />
</figure>
<section id="multiple-comparisons-correction">
<h2>Multiple Comparisons Correction<a class="headerlink" href="#multiple-comparisons-correction" title="Link to this heading"></a></h2>
<p>As with the volumetric analysis, we will need to correct for the number of vertices in our dataset (as opposed to the number of voxels). The commands needed to run a cluster simulation on the surface are more involved; similar to how we created an entire preprocessing script with uber_subject.py, we will create a cluster correction script with <code class="docutils literal notranslate"><span class="pre">slow_surf_clustsim.py</span></code> (note that this should be done for both hemispheres):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">slow_surf_clustsim</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">save_script</span> <span class="n">surf</span><span class="o">.</span><span class="n">clustsim</span><span class="mf">.001</span> <span class="o">-</span><span class="n">uvar</span> <span class="n">spec_file</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">std</span><span class="mf">.141</span><span class="o">.</span><span class="n">MNI_N27_lh</span><span class="o">.</span><span class="n">spec</span> \
 <span class="o">-</span><span class="n">uvar</span> <span class="n">surf_vol</span> <span class="n">suma_MNI_N27</span><span class="o">/</span><span class="n">MNI_N27_SurfVol</span><span class="o">.</span><span class="n">nii</span> <span class="o">-</span><span class="n">uvar</span> <span class="n">blur</span> <span class="mf">4.0</span> <span class="o">-</span><span class="n">on_surface</span> <span class="n">yes</span> <span class="o">-</span><span class="n">uvar</span> <span class="n">pthr_list</span> <span class="mf">0.001</span> \
 <span class="o">-</span><span class="n">uvar</span> <span class="n">results_dir</span> <span class="n">clust</span><span class="o">.</span><span class="n">results</span><span class="mf">.001</span>
</pre></div>
</div>
<p>And then run the output script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tcsh</span> <span class="n">surf</span><span class="o">.</span><span class="n">clustsim</span>
</pre></div>
</div>
<p>This script can take a while; the total processing time may be 60-90 minutes, depending on the speed of your machine.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Does the Eklund et al. 2016 paper apply to surface results? According to the FreeSurfer developers, analyses of the structural data also showed the same bias towards higher smoothness than was expected by their cluster simulations, indicating the need for a cluster-defining threshold of p=0.001 or stricter in order for the cluster simulations to be accurate. I haven’t read whether the same problems apply to the functional data used with SUMA, but to be on the safe side, use a cluster-defining p-threshold of p=0.001.</p>
</div>
<p>This script will generate z max images. To find the corresponding alpha p=0.05 value for an cluster-defining p-value of p=0.001, for example, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quick</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">niter</span> <span class="mi">1000</span> <span class="n">z</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">area</span><span class="mf">.0.001</span>
</pre></div>
</div>
<p>Which will return two columns: the number of vertices, in square millimeters, on the left; and the corresponding corrected p-threshold on the right. Scroll down until you find the number of vertices corresponding to a corrected p-threshold of 0.05, and then threshold this number of vertices in the SUMA viewer. Whichever clusters remain will be statistically significant.</p>
<p>You can then view these clusters in the SUMA viewer by loading the statistics dataset onto the template, and setting the p-threshold slider to your cluster-defining p-threshold. (Note: You can set the p-threshold exactly by clicking in the field above the p-threshold slider and entering <code class="docutils literal notranslate"><span class="pre">0.001p</span></code> to set a vertex-wise p-threshold of p=0.001, for example.) In the fields next to <code class="docutils literal notranslate"><span class="pre">Clst</span></code> in the bottom right of the control panel, enter the cluster-corrected threshold in the box underneath <code class="docutils literal notranslate"><span class="pre">Area</span></code>. For example, if we found that we need at least 110 contiguous vertices to be a statistically significant cluster, you would enter this into the field.</p>
<p>Then click on the <code class="docutils literal notranslate"><span class="pre">Clst</span></code> string to activate the interactive Clusterize feature, which will leave in the image only those clusters that pass the threshold. A table of the significant clusters will be printed to your Terminal; right click on the clusters in the viewing window to see which cluster is centered at your cross-hairs, and match this up with the cluster “# Rank” in the table. You should see something like the figure below:</p>
<figure class="align-default">
<img alt="../../../_images/09_04_ClusterCorrection.png" src="../../../_images/09_04_ClusterCorrection.png" />
</figure>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Switch between the different surface views using the <code class="docutils literal notranslate"><span class="pre">,</span></code> and <code class="docutils literal notranslate"><span class="pre">.</span></code> keys. In the right hemisphere, it appears that there is a significant cluster in the pre-SMA, and also in the cingulate sulcus; take a screenshot of a view that is oriented to best capture both of these effects.</p></li>
<li><p>Re-run the t-tests, this time using 3dMEMA with the REML results from the surface analysis. How do they differ from the non-REML analysis? Is it similar to the difference you observed between the REML and non-REML analyses with the volumetric data?</p></li>
<li><p>Re-run the surface analyses using a larger smoothing kernel, such as 10mm or 15mm. How do the results change? Do you think it is appropriate to use a larger smoothing kernel in this case? Why or why not?</p></li>
<li><p>See <a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/htmldoc/SUMA/Controllers.html#suma-controllers">this page</a> for a summary of what all the different SUMA buttons do, noting the similarity between them and the AFNI controller. Experiment with different color maps, opacities, and viewing options.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="SUMA_03_AnalysisOnTheSurface.html" class="btn btn-neutral float-left" title="SUMA Tutorial #3: Analysis on the Surface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SUMA_05_ROIAnalysisOnTheSurface.html" class="btn btn-neutral float-right" title="SUMA Tutorial #5: Region of Interest Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>