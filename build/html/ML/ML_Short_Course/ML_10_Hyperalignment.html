<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Machine Learning Tutorial #10: Hyperalignment &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Slicer Overview" href="../../Slicer/Slicer_Overview.html" />
    <link rel="prev" title="Machine Learning Tutorial #9: Representational Similarity Analysis" href="ML_09_RSA.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_Intro.html">什么是Unix系统?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../ML_Overview.html">Machine Learning for Neuroimagers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../ML_Overview.html#overview">Overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ML_00_Introduction.html">Machine Learning: Introduction to Basic Terms and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_01_Brown_Example.html">Machine Learning Tutorial #1: Basic Example with Support Vector Machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_02_Haxby_Intro_Download.html">Machine Learning Tutorial #2: The Haxby Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_03_Haxby_Preprocessing.html">Machine Learning Tutorial #3: Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_04_Haxby_Timing.html">Machine Learning Tutorial #4: Creating the Timing Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_05_Haxby_MVPA.html">Machine Learning Tutorial #5: MVPA Analysis with The Decoding Toolbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_06_Haxby_Scripting.html">Machine Learning Tutorial #6: Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_07_Haxby_GroupAnalysis.html">Machine Learning Tutorial #7: Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_08_Haxby_NonParametric.html">Machine Learning Tutorial #8: Non-Parametric Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_09_RSA.html">Machine Learning Tutorial #9: Representational Similarity Analysis</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Machine Learning Tutorial #10: Hyperalignment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#useful-links">Useful Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="#analyzing-data-with-hyperalignment">Analyzing Data with Hyperalignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-your-conda-environment">Setting Up Your Conda Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-jupyter-notebooks">Using Jupyter Notebooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hyperalignment-using-pymvpa">Hyperalignment Using PyMVPA</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../ML_Overview.html">Machine Learning for Neuroimagers</a></li>
      <li class="breadcrumb-item active">Machine Learning Tutorial #10: Hyperalignment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ML/ML_Short_Course/ML_10_Hyperalignment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="machine-learning-tutorial-10-hyperalignment">
<span id="ml-10-hyperalignment"></span><h1>Machine Learning Tutorial #10: Hyperalignment<a class="headerlink" href="#machine-learning-tutorial-10-hyperalignment" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is still under construction; check back soon!</p>
</div>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>One of the newer techniques in machine learning is <strong>hyperalignment</strong>, developed in James Haxby’s lab at Dartmouth. Instead of tranining a classifier on a pattern of voxels within a subject’s 3-D volume or 2-D surface, hyperalignment instead transforms a given set of voxels to a higher dimensional <strong>information space</strong>, which has as many dimensions as there are voxels in the region you are analyzing. For example, instead of a three dimensional cube of voxels, this hyperspace would have one axis per voxel, with the activity recorded in the voxel determining how far along the axis this voxel will be located. Another subject’s data is then transformed to match the other subject’s data in hyperspace, using a rigid-body transformation called a <strong>Procrustes Transformation</strong>. Once the best alignment is found, this is performed for each additional subject, using the average of the previous subjects as a target. When a new dataset is acquired, it is then compared to this hyperspace to see which condition the data best fit.</p>
<p>The main benefit of hyperalignment is a significant improvement in between-subject classification. Traditional MVPA techniques</p>
</section>
<section id="useful-links">
<h2>Useful Links<a class="headerlink" href="#useful-links" title="Link to this heading"></a></h2>
<p>There is an <a class="reference external" href="https://github.com/jwparks/Hyperalignment_tutorial/blob/main/Tutorial.ipynb">excellent introduction to Hyperalignment</a> by Jiwoong Park and Sooahn Lee, using Python.</p>
<p>The <a class="reference external" href="https://neuroimaging-data-science.org/root.html">Neuroimaging and Data Science</a> tutorial by Tal Yarkoni and Ariel Rokem is a good place to start not only for hyperalignment, but also to learn how to use Python for Neuroimaging analysis.</p>
<p><a class="reference external" href="https://naturalistic-data.org/content/Functional_Alignment.html">Luke Chang’s lab</a> at Dartmouth has a tutorial about how to use hyperalignment to analyze a dataset in which subjects watched a TV show.</p>
</section>
<section id="analyzing-data-with-hyperalignment">
<h2>Analyzing Data with Hyperalignment<a class="headerlink" href="#analyzing-data-with-hyperalignment" title="Link to this heading"></a></h2>
<p>To illustrate how to perform hyperalignment, we will use the Sherlock dataset, which is available <a class="reference external" href="https://openneuro.org/datasets/ds001132/versions/1.0.0">here</a> on OpenNeuro. The rest of this tutorial will closely follow the steps outlined in the Luke Change walkthrough listed above; he deserves the credit for explaining how to do the analysis. What follows is mostly my paraphrasing of his work; my goal is to try and explain it in my own words, and to use this as a teaching tool for my own purposes. Also note that you can either start with the raw data hosted on OpenNeuro (about 16 gigabytes), or use the fully preprocessed data listed on Luke Chang’s website. For the rest of this tutorial, we will use the fully preprocessed data.</p>
<p>To begin, we will download parts of the dataset using <a class="reference external" href="https://www.datalad.org/">DataLad</a>, a command for downloading datasets. It is similar to commands such as <code class="docutils literal notranslate"><span class="pre">wget</span></code> and <code class="docutils literal notranslate"><span class="pre">curl</span></code>, but allows for more sophisticated downloads.</p>
<p>For example, the fully preprocessed Sherlock dataset as a whole is over a hundred gigabytes; if we don’t have enough space on our local machine to analyze it, we can instead download just a few subjects using DataLad. For Macintosh Operating Systems, I recommend acquiring DataLad with <a class="reference external" href="https://brew.sh/">HomeBrew</a>. Once DataLad is installed, you can begin downloading the Sherlock dataset by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gin</span><span class="o">.</span><span class="n">g</span><span class="o">-</span><span class="n">node</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ljchang</span><span class="o">/</span><span class="n">Sherlock</span>
</pre></div>
</div>
<p>You can see how large the entire dataset would be by navigating into the Sherlock folder and typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">status</span> <span class="o">--</span><span class="n">annex</span>
</pre></div>
</div>
<p>Which returns a total size of 109.0 gigabytes. If we want to download individual files, we can navigate to the <code class="docutils literal notranslate"><span class="pre">stimuli</span></code> directory, for example, and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="o">*</span>
</pre></div>
</div>
<p>Which will download all of the files in that directory. Do the same for the files in the <code class="docutils literal notranslate"><span class="pre">onsets</span></code> directory, and then navigate into the <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> directory. This contains the fully preprocessed data analyzed with fMRIPrep. Let’s say that we just want to download the first four subjects; we can do so by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalad</span> <span class="n">get</span> <span class="n">sub</span><span class="o">-</span><span class="mi">01</span> <span class="n">sub</span><span class="o">-</span><span class="mi">02</span> <span class="n">sub</span><span class="o">-</span><span class="mi">03</span> <span class="n">sub</span><span class="o">-</span><span class="mi">04</span>
</pre></div>
</div>
<p>Depending on your connection speed, this can take several hours.</p>
</section>
<section id="setting-up-your-conda-environment">
<h2>Setting Up Your Conda Environment<a class="headerlink" href="#setting-up-your-conda-environment" title="Link to this heading"></a></h2>
<p>Conda is a <strong>virtual environment</strong> which can install packages into a partition separate from the rest of your computer. For example, within this environment we can install a version of Python that is different from the default one installed on your machine; this way, we can avoid any version issues and any configuration problems that might arise if all of these different software packages were installed on the same machine.</p>
<p>We will use conda to create a virtual environment for the rest of the analyses in this tutorial. First, download <cite>anaconda</cite> (a more complete suite of options for using conda commands) <a class="reference external" href="https://www.anaconda.com/download/">here</a>. When you have finished downloading it, open a terminal and type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">init</span> <span class="pre">bash</span></code>. Then, create a new virtual environment by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">naturalistic</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.7</span> <span class="n">anaconda</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you receive an error saying <code class="docutils literal notranslate"><span class="pre">PackagesNotFoundError:</span> <span class="pre">The</span> <span class="pre">following</span> <span class="pre">packages</span> <span class="pre">are</span> <span class="pre">not</span> <span class="pre">available</span> <span class="pre">from</span> <span class="pre">current</span> <span class="pre">channels:</span> <span class="pre">-</span> <span class="pre">python=3.7</span></code>, that could be due to python version 3.7 not being available by default on newer Apple models, as of this writing circa 2021-2023. See <a href="#id1"><span class="problematic" id="id2">`this thread https://stackoverflow.com/questions/70205633/cannot-install-python-3-7-on-osx-arm64&gt;`__</span></a> for an explanation of how to get around this error. In that case, you can use a more recent version of python, such as 3.9:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">naturalistic</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.9</span> <span class="n">anaconda</span>
</pre></div>
</div>
<p>Also, you may have to use the <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command if you run into any errors regarding root privileges.</p>
</div>
<p>Once you have created the environment, you will have to <strong>activate</strong> it by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">naturalistic</span></code>. Your shell will be updated with the word <code class="docutils literal notranslate"><span class="pre">(naturalistic)</span></code> preprended to it, indicating that you are now in the naturalistic Python environment that you created earlier.</p>
<p>Although the Python environment comes with several neuroimaging and statistical learning packages installed, we will have to install a few other ones manually. This is most easily done with <code class="docutils literal notranslate"><span class="pre">pip</span></code>, Python’s package manager. We will have to install the packages <strong>nilearn</strong>, <strong>nltools</strong>, and <strong>datalad</strong> to run the rest of the tutorial:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">nibabel</span> <span class="n">datalad</span> <span class="n">nilearn</span> <span class="n">nltools</span> <span class="n">hypertools</span> <span class="n">timecorr</span> <span class="n">pliers</span> <span class="n">statesegmentation</span> <span class="n">networkx</span> <span class="n">nltk</span> <span class="n">requests</span> <span class="n">urllib3</span>
</pre></div>
</div>
</section>
<section id="using-jupyter-notebooks">
<h2>Using Jupyter Notebooks<a class="headerlink" href="#using-jupyter-notebooks" title="Link to this heading"></a></h2>
<p>When these packages have finished downloading, you could open a python shell by typing <code class="docutils literal notranslate"><span class="pre">python</span></code>, and running the rest of this tutorial’s commands in that shell. However, the Python shell can be unwieldy; a more flexible and cleaner interface can be found with <a class="reference external" href="https://jupyter.org/">Jupyter Notebooks</a>. These are interactive environments that can be run in a web browser, and easily shared between groups. We can also load all of the currently installed packages in our environment into a new Notebook by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">anaconda</span> <span class="n">ipykernel</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">ipykernel</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">--</span><span class="n">name</span><span class="o">=</span><span class="n">naturalistic</span>
</pre></div>
</div>
<p>If you then type <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code> from the command line, it will open a new notebook in your web browser, which will look something like this:</p>
<figure class="align-default">
<img alt="ML/ML_Short_Course/10_Jupyter_Notebook.png" src="ML/ML_Short_Course/10_Jupyter_Notebook.png" />
</figure>
<p>Click on the <code class="docutils literal notranslate"><span class="pre">New</span></code> dropdown menu, and select <code class="docutils literal notranslate"><span class="pre">naturalistic</span></code> as the environment. This will load all of the packages you specified above, and allow you to begin a hyperalignment analysis of the data. All of the following lines of code can be copied and pasted into the Notebook, and then executed by holding <code class="docutils literal notranslate"><span class="pre">Shift</span></code> and pressing <code class="docutils literal notranslate"><span class="pre">Enter</span></code>.</p>
</section>
<section id="hyperalignment-using-pymvpa">
<h2>Hyperalignment Using PyMVPA<a class="headerlink" href="#hyperalignment-using-pymvpa" title="Link to this heading"></a></h2>
<p>Some quick notes about how I was able to install <a class="reference external" href="http://www.pymvpa.org/">PyMVPA</a> on my 2021 MacBook Pro, using an Apple M1 Pro chip and running Sonoma 14.4.1. PyMVPA is notoriously difficult to install, and I can’t promise this will work for you, but take it for what it’s worth.</p>
<ol class="arabic simple">
<li><p>Create a virtual environment using Python version 2.7, since most computers these days use Python3.x by default. These virtual environments can be installed using <code class="docutils literal notranslate"><span class="pre">conda</span></code>, which is part of the <code class="docutils literal notranslate"><span class="pre">anaconda</span></code> package, which can be downloaded <a class="reference external" href="https://docs.anaconda.com/free/anaconda/install/mac-os/">here</a>. Once conda is installed, type:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">py27</span> <span class="n">python</span><span class="o">=</span><span class="mf">2.7</span>
</pre></div>
</div>
</div></blockquote>
<p>This will create a new environment, “py27”, which runs python2.7 by default; that is, if you type <code class="docutils literal notranslate"><span class="pre">python</span></code> while inside of the virtual environment, it will use version 2.7</p>
<ol class="arabic simple" start="2">
<li><p>Use conda to install pymvpa2:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">pymvpa2</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Install an older version of nibabel, which apparently allows you to successfully run the command <code class="docutils literal notranslate"><span class="pre">h5load</span></code>. This was found <a href="#id1"><span class="problematic" id="id3">`here &lt;github.com/PyMVPA/PyMVPA/issues/624#issue-901162525`__</span></a>, on the PyMVPA github forums:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">nibabel</span><span class="o">==</span><span class="mf">2.0.2</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Download the data by clicking on <a class="reference external" href="http://data.pymvpa.org/datasets/hyperalignment_tutorial_data/">this link</a>, and selecting the file <code class="docutils literal notranslate"><span class="pre">hyperalignment_tutorial_data.hdf5.gz</span></code>.</p></li>
</ol>
<p>At that point, type <code class="docutils literal notranslate"><span class="pre">python</span></code> to open a Python shell, and begin typing the instructions from the <a class="reference external" href="http://www.pymvpa.org/examples/hyperalignment.html">PyMVPA hyperalignment tutorial</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ML_09_RSA.html" class="btn btn-neutral float-left" title="Machine Learning Tutorial #9: Representational Similarity Analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../Slicer/Slicer_Overview.html" class="btn btn-neutral float-right" title="Slicer Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>