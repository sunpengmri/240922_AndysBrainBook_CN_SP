<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Machine Learning Tutorial #7: Group Analysis &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Machine Learning Tutorial #8: Non-Parametric Analysis" href="ML_08_Haxby_NonParametric.html" />
    <link rel="prev" title="Machine Learning Tutorial #6: Scripting" href="ML_06_Haxby_Scripting.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../ML_Overview.html">Machine Learning for Neuroimagers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../ML_Overview.html#overview">Overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ML_00_Introduction.html">Machine Learning: Introduction to Basic Terms and Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_01_Brown_Example.html">Machine Learning Tutorial #1: Basic Example with Support Vector Machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_02_Haxby_Intro_Download.html">Machine Learning Tutorial #2: The Haxby Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_03_Haxby_Preprocessing.html">Machine Learning Tutorial #3: Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_04_Haxby_Timing.html">Machine Learning Tutorial #4: Creating the Timing Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_05_Haxby_MVPA.html">Machine Learning Tutorial #5: MVPA Analysis with The Decoding Toolbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_06_Haxby_Scripting.html">Machine Learning Tutorial #6: Scripting</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Machine Learning Tutorial #7: Group Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#group-analysis-roi">Group Analysis: ROI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#group-analysis-searchlight">Group Analysis: Searchlight</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video">Video</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ML_08_Haxby_NonParametric.html">Machine Learning Tutorial #8: Non-Parametric Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_09_RSA.html">Machine Learning Tutorial #9: Representational Similarity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML_10_Hyperalignment.html">Machine Learning Tutorial #10: Hyperalignment</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../ML_Overview.html">Machine Learning for Neuroimagers</a></li>
      <li class="breadcrumb-item active">Machine Learning Tutorial #7: Group Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ML/ML_Short_Course/ML_07_Haxby_GroupAnalysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="machine-learning-tutorial-7-group-analysis">
<span id="ml-07-haxby-groupanalysis"></span><h1>Machine Learning Tutorial #7: Group Analysis<a class="headerlink" href="#machine-learning-tutorial-7-group-analysis" title="Link to this heading"></a></h1>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>As in our tutorials on fMRI analysis, our goal in analyzing this dataset is to generalize the results to the population that the sample was drawn from. In other words, if we see a significant classification accuracy in these subjects, can we say that it would likely be seen in the population as well?</p>
<p>With MVPA, we have two different types of group analysis we can do: One with the ROI results, and one with the searchlight results. We will review how to do each of these in turn.</p>
</section>
<section id="group-analysis-roi">
<h2>Group Analysis: ROI<a class="headerlink" href="#group-analysis-roi" title="Link to this heading"></a></h2>
<p>One of the first-level analyses we did was a classification analysis within a region of interest, or ROI. In this case, we used the masks created in the original Haxby study, and generated a single classification accuracy for each condition for each subject. When we scripted our analyses in the last chapter, these results were stored in the directory <code class="docutils literal notranslate"><span class="pre">ROI_Results</span></code>; in order to do a group analysis, we will need to extract the classification accuracy for the conditions we are interested in, and then compare the accuracy across conditions.</p>
<p>The code below will extract the classification accuracy and store them in variables. For example, the cell <code class="docutils literal notranslate"><span class="pre">(4,4)</span></code> indexes the classification accuracy for “Faces”, since that was the fourth condition that we entered in our list of labelnames for the classifier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%%</span> <span class="n">Define</span> <span class="n">the</span> <span class="n">variables</span>

<span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">];</span>
<span class="n">Group_Results_Face</span> <span class="o">=</span> <span class="p">[];</span>
<span class="n">Group_Results_House</span> <span class="o">=</span> <span class="p">[];</span>
<span class="n">Group_Results_Scissors</span> <span class="o">=</span> <span class="p">[];</span>

<span class="o">%%%</span> <span class="n">Extract</span> <span class="n">confusion</span> <span class="n">matrix</span> <span class="n">accuracy</span> <span class="k">for</span> <span class="n">Faces</span><span class="p">,</span> <span class="n">Houses</span><span class="p">,</span> <span class="ow">and</span> <span class="n">Scissors</span>

<span class="k">for</span> <span class="n">subject</span><span class="o">=</span><span class="n">subjects</span>

    <span class="n">subject</span> <span class="o">=</span> <span class="n">num2str</span><span class="p">(</span><span class="n">subject</span><span class="p">);</span>

    <span class="n">ROI_Results</span> <span class="o">=</span> <span class="n">load</span><span class="p">([</span><span class="n">pwd</span> <span class="s1">&#39;/SPM_Results_&#39;</span> <span class="n">subject</span> <span class="s1">&#39;/ROI_Results/res_confusion_matrix.mat&#39;</span><span class="p">]);</span>

    <span class="n">Group_Results_Face</span> <span class="o">=</span> <span class="p">[</span><span class="n">Group_Results_Face</span><span class="p">,</span> <span class="n">ROI_Results</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">confusion_matrix</span><span class="o">.</span><span class="n">output</span><span class="p">{</span><span class="mi">1</span><span class="p">}(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)];</span>
    <span class="n">Group_Results_House</span> <span class="o">=</span> <span class="p">[</span><span class="n">Group_Results_House</span><span class="p">,</span> <span class="n">ROI_Results</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">confusion_matrix</span><span class="o">.</span><span class="n">output</span><span class="p">{</span><span class="mi">1</span><span class="p">}(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)];</span>
    <span class="n">Group_Results_Scissors</span> <span class="o">=</span> <span class="p">[</span><span class="n">Group_Results_Scissors</span><span class="p">,</span> <span class="n">ROI_Results</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">confusion_matrix</span><span class="o">.</span><span class="n">output</span><span class="p">{</span><span class="mi">1</span><span class="p">}(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">)];</span>

<span class="n">end</span>
</pre></div>
</div>
<p>We can then compare the classification accuracies for Faces against that of Houses, for example; or that of Faces versus Scissors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%%</span> <span class="n">Example</span> <span class="n">t</span><span class="o">-</span><span class="n">tests</span> <span class="o">%%%</span>
<span class="p">[</span><span class="n">F_H_h</span><span class="p">,</span> <span class="n">F_H_p</span><span class="p">,</span> <span class="n">F_H_ci</span><span class="p">,</span> <span class="n">F_H_stats</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttest</span><span class="p">(</span><span class="n">Group_Results_Face</span><span class="p">,</span> <span class="n">Group_Results_House</span><span class="p">);</span>
<span class="p">[</span><span class="n">F_S_h</span><span class="p">,</span> <span class="n">F_S_p</span><span class="p">,</span> <span class="n">F_S_ci</span><span class="p">,</span> <span class="n">F_S_stats</span><span class="p">]</span> <span class="o">=</span> <span class="n">ttest</span><span class="p">(</span><span class="n">Group_Results_Face</span><span class="p">,</span> <span class="n">Group_Results_Scissors</span><span class="p">);</span>
</pre></div>
</div>
<p>In the first case (Faces compared to Houses), the average classification accuracy within this ROI is virtually identical - the resulting t-test is not significant. The comparison of Faces against Scissors, on the other hand, yields a t-statistic of 5.80, p&lt;0.001, representing a significant difference between the two.</p>
</section>
<section id="group-analysis-searchlight">
<h2>Group Analysis: Searchlight<a class="headerlink" href="#group-analysis-searchlight" title="Link to this heading"></a></h2>
<p>The group analysis of the searchlight results requires more steps. Remember that our preprocessing pipeline did not include normalization, since we wanted to introduce as few interpolations as possible; this also enabled us to use subject-specific masks for our ROI group analysis.</p>
<p>Our searchlight maps, located within the <code class="docutils literal notranslate"><span class="pre">SPM_Results</span></code> directories, will instead need to be normalized before they can be used in a group analysis. To do this, open SPM, and then open the Batch editor. Select <code class="docutils literal notranslate"><span class="pre">BasicIO</span> <span class="pre">-&gt;</span> <span class="pre">File/Dir</span> <span class="pre">Operations</span> <span class="pre">-&gt;</span> <span class="pre">File</span> <span class="pre">Operations</span> <span class="pre">-&gt;</span> <span class="pre">Named</span> <span class="pre">File</span> <span class="pre">Selector</span></code>. Set the Input Name to “Anatomicals”, and create 6 File Sets. Select each subject’s realigned anatomical image for the corresponding File Set, and then create a Segmentation Module by selecting <code class="docutils literal notranslate"><span class="pre">SPM</span> <span class="pre">-&gt;</span> <span class="pre">Spatial</span> <span class="pre">-&gt;</span> <span class="pre">Segment</span></code>. Highlight the <code class="docutils literal notranslate"><span class="pre">Volumes</span></code> field and click <code class="docutils literal notranslate"><span class="pre">Dependency</span></code>, selecting all of the images from the Named File Selector. In the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Bias</span> <span class="pre">Corrected</span></code>, change the selection from <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Bias</span> <span class="pre">Corrected</span></code>. At the very bottom of the window, change <code class="docutils literal notranslate"><span class="pre">Deformation</span> <span class="pre">Fields</span></code> to <code class="docutils literal notranslate"><span class="pre">Forward</span></code>, and then click the Green Go button. This will only take a minute or two.</p>
<p>When it has finished, go back to the SPM GUI and select <code class="docutils literal notranslate"><span class="pre">Normalise</span> <span class="pre">-&gt;</span> <span class="pre">Write</span></code>. Create 6 new Subject fields, and select the corresponding deformation field in the <code class="docutils literal notranslate"><span class="pre">anat</span></code> directory and the <code class="docutils literal notranslate"><span class="pre">res_accuracy_minus_chance.nii</span></code> image for each subject in their results folder. Click <code class="docutils literal notranslate"><span class="pre">Done</span></code>, and then click the Green Go button. The normalized classification map for each subject, which now has a <code class="docutils literal notranslate"><span class="pre">w</span></code> prepended to it, can be overlaid on an MNI template of your choosing to make sure that it was normalized properly. You may also choose to smooth these normalized results in order to make the assumptions of the t-test more valid; to do this, click on <code class="docutils literal notranslate"><span class="pre">Smooth</span></code> and select the normalized images in each subject’s folder.</p>
<p>From the Matlab terminal, create a new directory by typing <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">2ndLevel_GroupResults</span></code>. Then click on <code class="docutils literal notranslate"><span class="pre">Specify</span> <span class="pre">2nd-Level</span></code> and select this new directory in the <code class="docutils literal notranslate"><span class="pre">Directory</span></code> field. Double-click on the <code class="docutils literal notranslate"><span class="pre">Scans</span></code> field, and select all of the smoothed and normalized accuracy maps; then, click on the <code class="docutils literal notranslate"><span class="pre">Estimate</span></code> button and estimate the model. When this is finished, click on <code class="docutils literal notranslate"><span class="pre">Results</span></code>. Just as with the fMRI studies, you can create a single contrast weight to determine where the classification accuracy is above chance. In this example we will use a voxel-wise threshold of p=0.001 and a cluster threshold of 50; see the link below for a guide to cluster correction if you want to fine-tune this. Notice that the results are strongest in the ventral temporal and occipital areas, similar to the results reported in the original Haxby paper.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a whole-brain analysis of accuracy minus chance, the assumptions of a t-test may not hold completely; a paper <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811916303470?casa_token=8EXUWXo8eusAAAAA:IYSVKKmJyzFfvv8ylKZiXaaKaGAFBKLFy45WYUwU5Ue4XHVq44eXU4T4LyEp_YJnL7xjTrqy">by Allefeld and colleagues</a> found that another method called <strong>prevalence testing</strong> may be more appropriate. In our case, this method may not be sensitive enough to work with only six subjects, but we will explore other approaches in future chapters.</p>
</div>
</section>
<section id="video">
<h2>Video<a class="headerlink" href="#video" title="Link to this heading"></a></h2>
<p>For a video demonstration of group level analysis with MVPA, click <a class="reference external" href="https://youtu.be/44H72YlYfvs">here</a>.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>Now that you have learned the basics of MVPA from preprocessing to group analysis, you are ready to use The Decoding Toolbox on a dataset of your choice. In the next chapters, we will review other features of The Decoding Toolbox, such as Representational Similarity Analysis (RSA).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ML_06_Haxby_Scripting.html" class="btn btn-neutral float-left" title="Machine Learning Tutorial #6: Scripting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ML_08_Haxby_NonParametric.html" class="btn btn-neutral float-right" title="Machine Learning Tutorial #8: Non-Parametric Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>