<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FreeSurfer Tutorial #7: The FSGD File &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="FreeSurfer Tutorial #8: Group Analysis" href="FS_08_GroupAnalysis.html" />
    <link rel="prev" title="FreeSurfer Tutorial #6: Freeview" href="FS_06_Freeview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../FreeSurfer_Introduction.html">FreeSurfer Short Course</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../FreeSurfer_Introduction.html#overview">Overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="FS_01_BasicTerms.html">FreeSurfer Tutorial #1: Basic Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_02_DownloadInstall.html">FreeSurfer Tutorial #2: How to Download and Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_03_ReconAll.html">FreeSurfer Tutorial #3: Recon-all</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_04_ReconAllParallel.html">FreeSurfer Tutorial #4: Running recon-all in Parallel</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_05_OpenScienceGrid.html">FreeSurfer Tutorial #5: Using the Open Science Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_06_Freeview.html">FreeSurfer Tutorial #6: Freeview</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">FreeSurfer Tutorial #7: The FSGD File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#comparing-groups">Comparing Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#organizing-the-directories">Organizing the Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-fsgd-file">Creating the FSGD File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-contrast-file">Creating the Contrast file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exercises">Exercises</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video">Video</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="FS_08_GroupAnalysis.html">FreeSurfer Tutorial #8: Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_09_ClusterCorrection.html">FreeSurfer Tutorial #9: Cluster Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_10_CorrelationAnalysis.html">FreeSurfer Tutorial #10: Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_11_ROIAnalysis.html">FreeSurfer Tutorial #11: Region of Interest Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_12_FailureModes.html">FreeSurfer Tutorial #12: Introduction to Failure Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_13_PialSurface.html">FreeSurfer Tutorial #13: SkullStripping and Pial Surface Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="FS_14_ControlPoints.html">FreeSurfer Tutorial #14: Control Points and Intensity Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="AppendixA_LGI.html">Appendix A: Local Gyrification Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="AppendixB_PETSurfer.html">Appendix B: PETSurfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="AppendixC_Annotations.html">Appendix C: Annotating Anatomical Images with Freeview</a></li>
<li class="toctree-l3"><a class="reference internal" href="AppendixD_SegmentingSubfields.html">Appendix D: Segmenting Hippocampal, Amygdala, Brainstem, and Thalamus Subfields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TRACULA_ShortCourse/TRACULA_01_Intro.html">TRACULA Tutorial #1: Overview</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ML/ML_Overview.html">Machine Learning for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
      <li class="breadcrumb-item active">FreeSurfer Tutorial #7: The FSGD File</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/FreeSurfer/FS_ShortCourse/FS_07_FSGD.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="freesurfer-tutorial-7-the-fsgd-file">
<span id="fs-07-fsgd"></span><h1>FreeSurfer Tutorial #7: The FSGD File<a class="headerlink" href="#freesurfer-tutorial-7-the-fsgd-file" title="Link to this heading"></a></h1>
<hr class="docutils" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before starting this tutorial, create a directory called <code class="docutils literal notranslate"><span class="pre">FS</span></code> within the <code class="docutils literal notranslate"><span class="pre">Cannabis</span></code> directory. The <code class="docutils literal notranslate"><span class="pre">FS</span></code> directory should contain all of the directories that have been generated by recon-all. Either run the recon-all commands from that directory, or move them into the FS directory with the <code class="docutils literal notranslate"><span class="pre">mv</span></code> command.</p>
</div>
<section id="comparing-groups">
<h2>Comparing Groups<a class="headerlink" href="#comparing-groups" title="Link to this heading"></a></h2>
<p>So far we have reviewed the basic commands of FreeSurfer: recon-all and freeview. Recon-all creates a series of volumes and surfaces from a T1-weighted anatomical image, and quantifies the amount of grey matter thickness and volume in different regions of the brain. The cortical regions are called <strong>parcellations</strong>, and the sub-cortical regions are called <strong>segmentations</strong>. For example, the left superior frontal gyrus is a parcellation delineated by the Desikan-Killiany atlas, and structural measurements are calculated in that region for each subject. The right amygdala, on the other hand, is a segmentation; because the sub-cortical regions are not inflated into a surface, they only contain measurements of grey matter volume, not thickness.</p>
<p>At this point, you may be thinking about how to compare structural measurements between groups and how to represent those differences on the surface of the brain. The procedure is similar to fMRI analysis: Just as we compare voxels in fMRI, we compare vertices in FreeSurfer. If the vertices are in a common space such as MNI, we can calculate differences in grey matter thickness at a particular vertex and test whether that difference is significant. This generates statistical maps that we can overlay on a template brain as a surface map.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../../_images/07_Group_Analysis_FS.png"><img alt="../../_images/07_Group_Analysis_FS.png" src="../../_images/07_Group_Analysis_FS.png" style="width: 443.0px; height: 326.0px;" /></a>
<figcaption>
<p><span class="caption-text">Example of a group analysis result mapped onto the fsaverage template. Lighter blue colors represent more negative contrast estimates, and yellow colors represent more positive contrast estimates.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The template brain that we use, which was mentioned in passing in the earlier tutorials, is called <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code>. It is an average of 40 subjects that were combined using the spherical averaging technique described in <a class="reference external" href="https://tinyurl.com/y4ubdg78">Fischl et al., 1999</a>. The coordinates of this brain are used as a standardized space for the rest of the brains which are normalized to the fsaverage template.</p>
</section>
<section id="organizing-the-directories">
<h2>Organizing the Directories<a class="headerlink" href="#organizing-the-directories" title="Link to this heading"></a></h2>
<p>First, we will copy the fsaverage template into our current directory. Navigate to the Cannabis directory which contains all of the subjects (i.e., <code class="docutils literal notranslate"><span class="pre">Cannabis/FS</span></code>), and then type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cp -R $FREESURFER_HOME/subjects/fsaverage .
</pre></div>
</div>
<p>to copy the fsaverage template. When that is done, set the SUBJECTS_DIR variable to the current directory by typing <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">SUBJECTS_DIR=`pwd`</span></code>. This will place the output of any recon-all or group analysis commands into the current directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>setenv SUBJECTS_DIR `pwd`
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The backticks which bookend <code class="docutils literal notranslate"><span class="pre">pwd</span></code> will display the absolute path to the current directory; in other words, it will replace <code class="docutils literal notranslate"><span class="pre">`pwd`</span></code> with whatever the output is of typing the command <code class="docutils literal notranslate"><span class="pre">pwd</span></code>. This kind of shorthand will be useful, so practice it whenever you have the chance.</p>
</div>
<p>We will also create two directories called <code class="docutils literal notranslate"><span class="pre">FSGD</span></code> and <code class="docutils literal notranslate"><span class="pre">Contrasts</span></code>, which will contain the text files needed to run our analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">FSGD</span> <span class="n">Contrasts</span>
</pre></div>
</div>
</section>
<section id="creating-the-fsgd-file">
<h2>Creating the FSGD File<a class="headerlink" href="#creating-the-fsgd-file" title="Link to this heading"></a></h2>
<p>The Cannabis dataset comes with a file called <code class="docutils literal notranslate"><span class="pre">participants.tsv</span></code> that contains labels and covariates for each subject: Group, gender, age, onset of cannabis use, and so on. To create a FreeSurfer Group Descriptor (FSGD) file, we will extract those covariates or group labels that we are interested in and format them in a way that FreeSurfer understands. The FSGD file will both contain the covariates that we want to contrast, and a separate contrast file will indicate which covariates to contrast and which weights to assign to them.</p>
<figure class="align-default" id="id2">
<img alt="../../_images/07_Participant_File.png" src="../../_images/07_Participant_File.png" />
<figcaption>
<p><span class="caption-text">Screenshot of part of the participant file that comes with the Cannabis dataset. Note: HC = Healthy Controls. Farther down the participant file, the label CB stands for Cannabis User.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>To keep our files organized, copy the participants.tsv file into the FSGD directory, and rename it <code class="docutils literal notranslate"><span class="pre">CannabisStudy.tsv</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">../</span><span class="n">particpants</span><span class="o">.</span><span class="n">tsv</span> <span class="n">FSGD</span><span class="o">/</span><span class="n">CannabisStudy</span><span class="o">.</span><span class="n">tsv</span><span class="o">.</span>
</pre></div>
</div>
<p>Now, open the file <code class="docutils literal notranslate"><span class="pre">CannabisStudy.tsv</span></code> in Excel. We will reformat it into an FSGD file, which is organized in such a way that can be understood by the group analysis commands we will run later. In the first column, type the following four lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GroupDescriptorFile</span> <span class="mi">1</span>
<span class="n">Title</span> <span class="n">CannabisStudy</span>
<span class="n">Class</span> <span class="n">HC</span>
<span class="n">Class</span> <span class="n">CB</span>
</pre></div>
</div>
<p>These lines are called <strong>header lines</strong>, since they are needed at the top, or head, of the document and indicate the format of the FSGD file. The first line, <code class="docutils literal notranslate"><span class="pre">GroupDescriptorFile</span> <span class="pre">1</span></code>, indicates that the file is in FSGD format; you will need this first line in any FSGD file that you create. The second line, <code class="docutils literal notranslate"><span class="pre">Title</span> <span class="pre">CannabisStudy</span></code>, will prepend the string “CannabisStudy” to the directories which store the results of your analyses. The next two lines, <code class="docutils literal notranslate"><span class="pre">Class</span> <span class="pre">HC</span></code> and <code class="docutils literal notranslate"><span class="pre">Class</span> <span class="pre">CB</span></code>, indicate that the subject name next to a column containing the string HC belongs to the HC group, and that the subject name next to a column containing the string CB belongs to the CB group. For example, after our header lines, we may see something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">202</span> <span class="n">HC</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">206</span> <span class="n">HC</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">207</span> <span class="n">HC</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">101</span> <span class="n">CB</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">103</span> <span class="n">CB</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">104</span> <span class="n">CB</span>
</pre></div>
</div>
<p>The first column, <code class="docutils literal notranslate"><span class="pre">Input</span></code>, signalizes that this row contains a subject; the next column, <code class="docutils literal notranslate"><span class="pre">sub-202</span></code> through <code class="docutils literal notranslate"><span class="pre">sub-104</span></code>, specifies the subject name (which should correspond to the subject directories in the Cannabis folder); and the last column, <code class="docutils literal notranslate"><span class="pre">HC</span></code> and <code class="docutils literal notranslate"><span class="pre">HB</span></code>, indicates which group that subject belongs to. In this case, subjects 202, 206, and 207 belong to the HC group, and subjects 101, 103, and 104 belong to the CB group. Our goal is to contrast the structural measurements between the groups, which we will do in the next chapter. Later on, you will see how to add as many covariates as you like - one for each column. These covariates will be selected from the <code class="docutils literal notranslate"><span class="pre">participants.tsv</span></code> file.</p>
<p>For now, save the spreadsheet as a Tab Delimited Text file by clicking on <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">-&gt;</span> <span class="pre">Save</span> <span class="pre">As</span></code>, and selecting “Tab Delimited Text” from the File Format field. This will create a file called <code class="docutils literal notranslate"><span class="pre">CannabisStudy.txt</span></code>. Make sure this is saved into the FSGD directory. Then open a Terminal, navigate to the FSGD directory, and type the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tr</span> <span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">&lt;</span> <span class="n">CannabisStudy</span><span class="o">.</span><span class="n">txt</span> <span class="o">&gt;</span> <span class="n">CannabisStudy</span><span class="o">.</span><span class="n">fsgd</span>
</pre></div>
</div>
<p>This will remove any DOS carriage returns, which Unix cannot interpret, and replaces them with newline characters. This will prevent any errors when using the FSGD file with FreeSurfer commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although we are not discussing covariates yet, be aware that many researchers choose to include estimated total intracranial volume (eTIV) as a covariate when comparing groups. See the note in <a class="reference internal" href="FS_10_CorrelationAnalysis.html#fs-10-correlationanalysis"><span class="std std-ref">this page</span></a> under the section “Modifying the FSGD File”.</p>
</div>
</section>
<section id="creating-the-contrast-file">
<h2>Creating the Contrast file<a class="headerlink" href="#creating-the-contrast-file" title="Link to this heading"></a></h2>
<p>Our next step is to create a contrast file that specifies the <strong>contrast weights</strong> for each regressor in our model. The “Class” variables that we specified in the FSGD file are group regressors: One for the Cannabis group, and one for the Control group. Since we have only two regressors, we only need to specify two contrast weights.</p>
<p>To specify these weights, navigate to the <code class="docutils literal notranslate"><span class="pre">Contrasts</span></code> directory and then type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;1 -1&quot;</span> <span class="o">&gt;</span> <span class="n">HC</span><span class="o">-</span><span class="n">CB</span><span class="o">.</span><span class="n">mtx</span>
</pre></div>
</div>
<p>This enters the string <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-1</span></code> into a file labeled <code class="docutils literal notranslate"><span class="pre">HC-CB.mtx</span></code>. (<code class="docutils literal notranslate"><span class="pre">.mxt</span></code> stands for “matrix”, as in, “contrast matrix”; in more complicated designs, the contrast file can be any size M x N matrix.) The label of the contrast file can be anything you choose; in this example, we have chosen a label that is compact and easy to understand.</p>
<p>Now create another contrast file for the opposite contrast, namely:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;-1 1&quot;</span> <span class="o">&gt;</span> <span class="n">CB</span><span class="o">-</span><span class="n">HC</span><span class="o">.</span><span class="n">mtx</span>
</pre></div>
</div>
<p>Which will create a contrast file subtracting the Control group from the Cannabis group.</p>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading"></a></h2>
<p>Now that we have created the files necessary for a group analysis, the next step is to run the group analysis itself. Before you proceed, try the following exercises to test your understanding of what you just read.</p>
<ol class="arabic simple">
<li><p>If you wanted to create a contrast representing the average effect across groups, what contrast weights would you use? What would be a good label for the contrast file?</p></li>
<li><p>When analyzing an open-access dataset designed to compare Old and Young groups, you come across this FSGD file:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GroupDescriptorFile</span> <span class="mi">1</span>
<span class="n">Title</span> <span class="n">MyStudy</span>
<span class="n">Class</span> <span class="n">Old</span>
<span class="n">Class</span> <span class="n">Young</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">101</span> <span class="n">HighAge</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">102</span> <span class="n">HighAge</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">103</span> <span class="n">HighAge</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">201</span> <span class="n">LowAge</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">202</span> <span class="n">LowAge</span>
<span class="n">Input</span> <span class="n">sub</span><span class="o">-</span><span class="mi">203</span> <span class="n">LowAge</span>
</pre></div>
</div>
<p>What is wrong with this file? Which parts would you change? (Hint: One section you <em>must</em> change for the analysis to run without FreeSurfer throwing any errors; another section can be changed to better describe the analysis.)</p>
</section>
<hr class="docutils" />
<section id="video">
<h2>Video<a class="headerlink" href="#video" title="Link to this heading"></a></h2>
<p>For a video demonstration of how to create the FSGD file, click <a class="reference external" href="https://www.youtube.com/watch?v=3T9PuME2g9A&amp;list=PLIQIswOrUH6_DWy5mJlSfj6AWY0y9iUce&amp;index=7">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="FS_06_Freeview.html" class="btn btn-neutral float-left" title="FreeSurfer Tutorial #6: Freeview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FS_08_GroupAnalysis.html" class="btn btn-neutral float-right" title="FreeSurfer Tutorial #8: Group Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>