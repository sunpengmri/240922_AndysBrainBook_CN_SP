<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fASL Tutorial #4: The GUI &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fASL Tutorial #5: Examining the Results" href="05_fASL_Results.html" />
    <link rel="prev" title="fASL Tutorial #3: The N-Back Task" href="fASL_03_Task.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">fASL Tutorial #4: The GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-gui">Overview of the GUI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#input-data-file-required">Input Data File (Required)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constants-acquisition-params">Constants &amp; Acquisition Params</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-series-preprocessing">Time Series Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spatial-transformations">Spatial Transformations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fmri">FMRI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#contrast-weights">Contrast weights</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ML/ML_Overview.html">Machine Learning for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">fASL Tutorial #4: The GUI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/ASL/04_fASL_GUI.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fasl-tutorial-4-the-gui">
<span id="fasl-gui"></span><h1>fASL Tutorial #4: The GUI<a class="headerlink" href="#fasl-tutorial-4-the-gui" title="Link to this heading"></a></h1>
<hr class="docutils" />
<section id="overview-of-the-gui">
<h2>Overview of the GUI<a class="headerlink" href="#overview-of-the-gui" title="Link to this heading"></a></h2>
<p>Navigate to the directory that contains <code class="docutils literal notranslate"><span class="pre">run_1</span></code> and <code class="docutils literal notranslate"><span class="pre">run_2</span></code>. When you open the fASL GUI by typing <code class="docutils literal notranslate"><span class="pre">fasl02</span></code> from the command line in Matlab, you will see this window:</p>
<figure class="align-default">
<img alt="../_images/04_fASL_GUI_Default.png" src="../_images/04_fASL_GUI_Default.png" />
</figure>
<p>The GUI is divided into several windows, each responsible for a different aspect of ASL processing. Certain steps are greyed out, and only become useable when a box is checked - for example, you won’t be able to create a design matrix unless you check the box next to <code class="docutils literal notranslate"><span class="pre">GLM</span> <span class="pre">estimation</span> <span class="pre">and</span> <span class="pre">stats</span></code>. We will walk through what each step does, and which options you may want to change in order to adapt them to your analysis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all of the steps are needed to analyze the dataset. For the purposes of this tutorial, we will omit the <code class="docutils literal notranslate"><span class="pre">Quantify</span> <span class="pre">CBF</span></code> and <code class="docutils literal notranslate"><span class="pre">Reconstruction</span></code> steps.</p>
</div>
<section id="input-data-file-required">
<h3>Input Data File (Required)<a class="headerlink" href="#input-data-file-required" title="Link to this heading"></a></h3>
<figure class="align-default">
<img alt="../_images/04_InputDataFile.png" src="../_images/04_InputDataFile.png" />
</figure>
<p>Click the button <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Data</span> <span class="pre">File</span></code> to open a window that you can use to select your input data. The ASL data has already been reconstructed for you - that is, it has been converted to a format that can be analyzed with SPM’s preprocessing tools. Navigate to the directory <code class="docutils literal notranslate"><span class="pre">run_2/func</span></code>, select the file <code class="docutils literal notranslate"><span class="pre">run_2.nii</span></code>, and then click <code class="docutils literal notranslate"><span class="pre">Open</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>fASL is able to reconstruct raw data as well. In that case, you would load your raw data, and then check the box next to <code class="docutils literal notranslate"><span class="pre">Stack</span> <span class="pre">of</span> <span class="pre">Spirals</span> <span class="pre">Recon</span> <span class="pre">(UM)</span></code> in the <code class="docutils literal notranslate"><span class="pre">Reconstruction</span></code> box. Check with your scan technician whether the scan used GRAPPA along the Z-axis; if so, check the corresponding box.</p>
</div>
</section>
<section id="constants-acquisition-params">
<h3>Constants &amp; Acquisition Params<a class="headerlink" href="#constants-acquisition-params" title="Link to this heading"></a></h3>
<p>This window contains the parameters that were used to acquire the scan, such as TR, T1 decay, and arterial transit time. We will only change one of the defaults: Decrease the <code class="docutils literal notranslate"><span class="pre">N.</span> <span class="pre">of</span> <span class="pre">M0</span> <span class="pre">frames</span></code> from 6 to 0. When you are finished, the window should look like this:</p>
<figure class="align-default">
<img alt="../_images/04_ConstantsAcquisitionParams.png" src="../_images/04_ConstantsAcquisitionParams.png" />
</figure>
</section>
<section id="time-series-preprocessing">
<h3>Time Series Preprocessing<a class="headerlink" href="#time-series-preprocessing" title="Link to this heading"></a></h3>
<p>These steps are similar to the preprocessing steps described in the <a class="reference internal" href="../fMRI_Short_Course/fMRI_04_Preprocessing.html#fmri-04-preprocessing"><span class="std std-ref">FSL Short Course</span></a>; review those steps for more details about what each one does.</p>
<p>Since these reconstructed data have already been slice-time corrected, leave that box unchecked. We also do not have physiological regressors for this data set, so we will leave that box unchecked as well. Check the rest of the boxes: Realignment, Smoothing, Subtraction, CompCorr, and Spatial Normalization. After you have checked the box next to Subtraction, you will have two options to choose from: <strong>Pairwise</strong> and <strong>Surround</strong>. These refer to how the contrast images are created from subtracting the control images from the label images. Pairwise subtracts each image from its neighbor, while Surround takes a triplet of images, multiplies the middle one by two, and subtracts it from the surrounding images. In this experiment, we acquired the ASL images with a Surround paradigm - select that option by clicking on it with your mouse.</p>
<figure class="align-default" id="id1">
<img alt="../_images/04_TimeSeriesPreprocessing.png" src="../_images/04_TimeSeriesPreprocessing.png" />
<figcaption>
<p><span class="caption-text">The preprocessing window should have these boxes checked, and the Surround option highlighted.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="spatial-transformations">
<h3>Spatial Transformations<a class="headerlink" href="#spatial-transformations" title="Link to this heading"></a></h3>
<p>Since we have decided to do Spatial Normalization by checking that box in the Time Series Preprocessing window, we will need to point to the location of the subject’s anatomical image, and a template image to normalize the data to. Click on <code class="docutils literal notranslate"><span class="pre">Coregister</span> <span class="pre">to</span> <span class="pre">Structural</span></code>, and navigate to the subject’s <code class="docutils literal notranslate"><span class="pre">anatomy</span></code> directory. Select <code class="docutils literal notranslate"><span class="pre">anat_ss.nii</span></code>, which is a skull-stripped anatomical dataset.</p>
<p>Next, click on <code class="docutils literal notranslate"><span class="pre">Normalise</span> <span class="pre">to</span> <span class="pre">Template</span></code>. Any normalized template can be used; in this example, we will use one of SPM’s standard templates. Navigate to the <code class="docutils literal notranslate"><span class="pre">ASL_Lab</span></code> directory, and select the image <code class="docutils literal notranslate"><span class="pre">avg152_T1.nii</span></code>.</p>
<figure class="align-default">
<img alt="../_images/04_SpatialTransformations.png" src="../_images/04_SpatialTransformations.png" />
</figure>
</section>
</section>
<hr class="docutils" />
<section id="fmri">
<h2>FMRI<a class="headerlink" href="#fmri" title="Link to this heading"></a></h2>
<p>Now that we have all of the preprocessing steps ready to go, we will create a general linear model to analyze the data once it has been preprocessed. This will require creating a design matrix indicating which condition occurred at which time, and for what duration. We will also specify which conditions we want to contrast against each other - which in this example will be the 4-back compared to the 1-back task. The resulting image will show differences in cerebral blood flow between those conditions.</p>
<p>To begin, click on <code class="docutils literal notranslate"><span class="pre">Build</span> <span class="pre">Design</span> <span class="pre">Matrix</span></code>. This will open up another window that says <code class="docutils literal notranslate"><span class="pre">ASL</span> <span class="pre">Design</span> <span class="pre">Matrix</span> <span class="pre">Builder</span></code>. In the field next to <code class="docutils literal notranslate"><span class="pre">TR</span> <span class="pre">(sec.)</span></code>, enter the number <code class="docutils literal notranslate"><span class="pre">4</span></code>. In the <code class="docutils literal notranslate"><span class="pre">Exp.</span> <span class="pre">Duration</span> <span class="pre">(sec.)</span></code> field, enter <code class="docutils literal notranslate"><span class="pre">1192</span></code>. Leave unchecked the box next to <code class="docutils literal notranslate"><span class="pre">Unsubtracted</span> <span class="pre">ASL</span> <span class="pre">data</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you were to look at the header of the unprocessed functional data, you would notice that there 300 time points. Since the TR is 4 seconds, it follows that the total duration of the run is 1200 seconds. Why then do we type 1192 in this window? When we specified Surround subtraction in the Time Series Preprocessing window, this indicated to fASL to remove the first and last TRs from the time series, as they do not have both left and right neighboring volumes. This change in the duration of the run will also be reflected in the Onsets field below, which we turn to next.</p>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">onsets</span> <span class="pre">(s.)</span></code> field, type the following string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">65</span> <span class="mi">355</span> <span class="mi">733</span> <span class="mi">1098</span><span class="p">]</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>These are the onsets for the <strong>1-back</strong> condition. We place the onsets in brackets, and then append -8 at the end; this will subtract 8 from each of the onset times, corresponding to the removal of the first and last TRs of the run (2 TRs of 4 seconds each = 8 seconds).</p>
<p>Next, in the <code class="docutils literal notranslate"><span class="pre">durations</span> <span class="pre">(s.)</span></code> field, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">149</span> <span class="mi">125</span> <span class="mi">72</span> <span class="mi">96</span><span class="p">]</span>
</pre></div>
</div>
<p>These numbers represent the length of each block of the condition, with the beginning of the block specified by the onsets above. For example, the first block of the 1-back task started 65 seconds into the scan, and lasted for 149 seconds. Another block of 1-back trials occurred 355 seconds into the scan and lasted for 125 seconds, and so on.</p>
<p>Now click the button <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">to</span> <span class="pre">Matrix</span></code>. This will add a column to the matrix which contains bands of grey overlaying a column of black. The grey bands indicate when the 1-back condition was presented to the subject. In the design matrix, time is represented as starting at the top (i.e., timepoint 0) and ending at the bottom. You should see how the onsets and the durations correspond to the location and length of each of the grey bands.</p>
<p>We will add another column for the 4-back task. Enter the following onsets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">219</span> <span class="mi">520</span> <span class="mi">656</span> <span class="mi">810</span> <span class="mi">922</span> <span class="mi">1010</span><span class="p">]</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>And the following durations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">96</span> <span class="mi">96</span> <span class="mi">72</span> <span class="mi">72</span> <span class="mi">48</span> <span class="mi">48</span><span class="p">]</span>
</pre></div>
</div>
<p>Then click <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">to</span> <span class="pre">Matrix</span></code>. Lastly, in the field under <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Matrix</span> <span class="pre">as</span></code>, type <code class="docutils literal notranslate"><span class="pre">NBack_Matrix</span></code> and click <code class="docutils literal notranslate"><span class="pre">SAVE</span></code>. When you have done that, close out of the window.  If you have done everything correctly, your design matrix should look like this:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/04_ASL_Design_Matrix.png"><img alt="../_images/04_ASL_Design_Matrix.png" src="../_images/04_ASL_Design_Matrix.png" style="width: 428.0px; height: 599.0px;" /></a>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you made any mistakes in the onset or duration vectors and accidentally added it to the matrix, you have two options: 1) Click the <code class="docutils literal notranslate"><span class="pre">CLEAR</span></code> button to remove all of the regressors and begin from scratch; or 2) Enter the regressor number in the <code class="docutils literal notranslate"><span class="pre">Remove</span> <span class="pre">regressor</span> <span class="pre">number</span></code> field. In the completed example above, there are three regressors: The first one, an all-white column, represents the baseline regressor; and next two represent the 1-back and 4-back regressors. If you wanted to delete the regressor for the 1-back task, for example, you would type the number <code class="docutils literal notranslate"><span class="pre">2</span></code> into the field and press enter. You should see it disappear from the matrix.</p>
<p>To keep everything in order, if you do have to remove a regressor, we recommend clearing everything and starting over. This will keep the regressors in the correct order for specifying the contrast weights, which we will now review.</p>
</div>
<section id="contrast-weights">
<h3>Contrast weights<a class="headerlink" href="#contrast-weights" title="Link to this heading"></a></h3>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Load</span> <span class="pre">Design</span> <span class="pre">Matrix</span></code> and select the NBack_Matrix you just created. fASL will display a figure showing the matrix you just created; make sure it looks like the matrix above, and then close the figure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are having trouble creating the design matrix, we have already created one for you. Click on <code class="docutils literal notranslate"><span class="pre">Load</span> <span class="pre">Design</span> <span class="pre">Matrix</span></code>, navigate to the main <code class="docutils literal notranslate"><span class="pre">ASL_Lab</span></code> directory, and select <code class="docutils literal notranslate"><span class="pre">NBack_Matrix</span></code>.</p>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">Contrasts</span> <span class="pre">of</span> <span class="pre">Interest</span> <span class="pre">(matrix)</span></code> field, type the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>This is Matlab syntax which creates a 3x3 identity matrix, and then adds another row (0 -1 1). Although you can’t see it here, keep in mind that this line expands to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="mi">0</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>In other words, 4 contrasts will be created: One simple effect for each regressor in the model, and one contrast between the 4-back and 1-back tasks. Take a moment to think about why we specified the last line the way we did; do these contrast weights make sense given the order of the regressors in the design matrix?</p>
<p>Make sure that the boxes are checked next to <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">are</span> <span class="pre">already</span> <span class="pre">subtracted</span></code> and <code class="docutils literal notranslate"><span class="pre">Display</span> <span class="pre">last</span> <span class="pre">Z</span> <span class="pre">map</span></code>. The FMRI window should look like this:</p>
<p>When you have reviewed everything and it looks correct, press <code class="docutils literal notranslate"><span class="pre">GO!</span></code> to begin the analysis. It should take about 5-10 minutes. When it finishes, you will see several figures printed to the screen and several new files written to your directory; we will explain what they are in the next section.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fASL_03_Task.html" class="btn btn-neutral float-left" title="fASL Tutorial #3: The N-Back Task" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="05_fASL_Results.html" class="btn btn-neutral float-right" title="fASL Tutorial #5: Examining the Results" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>