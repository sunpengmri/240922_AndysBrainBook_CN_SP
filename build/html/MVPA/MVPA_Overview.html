<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction to Multi-Voxel Pattern Analysis (MVPA) &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../OpenScience/OS_Overview.html">Open Science</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ML/ML_Overview.html">Machine Learning for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction to Multi-Voxel Pattern Analysis (MVPA)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/MVPA/MVPA_Overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction-to-multi-voxel-pattern-analysis-mvpa">
<span id="mvpa-overview"></span><h1>Introduction to Multi-Voxel Pattern Analysis (MVPA)<a class="headerlink" href="#introduction-to-multi-voxel-pattern-analysis-mvpa" title="Link to this heading"></a></h1>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>This contains notes on a sample MVPA dataset I am currently analyzing; this is still under construction. The following is based on a template I found on a Brown University website <a class="reference external" href="https://www.brown.edu/carney/mri/researchers/analysis-pipelines/mvpa">here</a>.</p>
</section>
<section id="setting-up-the-script">
<h2>Setting up the Script<a class="headerlink" href="#setting-up-the-script" title="Link to this heading"></a></h2>
<p>Create the script with uber_subject.py, as in the <a class="reference internal" href="../AFNI/AFNI_Short_Course/AFNI_Preprocessing/AFNI_Intermezzo_Uber_Subject.html#afni-intermezzo-uber-subject"><span class="std std-ref">AFNI tutorials</span></a>. When you have generated the script, change the following:</p>
<ol class="arabic simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">-init_xform</span> <span class="pre">AUTO_CENTER</span></code> after the &#64;auto_tlrc command;</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">-force_TR</span> <span class="pre">0.8</span></code>, <code class="docutils literal notranslate"><span class="pre">-global_times</span></code>, and <code class="docutils literal notranslate"><span class="pre">-mask</span> <span class="pre">mask_group+tlrc</span></code> to the 3dDeconvolve command;</p></li>
<li><p>Change the basis function to stim_times_IM (if you haven’t already done so in the uber_subject.py script).</p></li>
</ol>
<p>Run the script, which may take 2-3 hours. The regression for the LipRead dataset will take a long time, since it is a large dataset with many regressors being estimated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the functional or anatomical files are labeled as though they are in TLRC space, although they haven’t been normalized, use the following command to put them in ORIG space:</p>
<p>3drefit -space ORIG run_01.nii</p>
<p>And so on, for all of the images that need to be reformatted.</p>
</div>
</section>
<section id="extracting-the-individual-betas">
<h2>Extracting the Individual Betas<a class="headerlink" href="#extracting-the-individual-betas" title="Link to this heading"></a></h2>
<p>Next, the beta estimates will need to be extracted for each trial for each run separately. We will then use 4 of the runs as training data, and the last 2 as test datasets. (Not sure about these exact numbers; maybe they can be modified, e.g., 5 training runs and 1 test run.) The following script, when it is finalized, will be uploaded on Github and called <code class="docutils literal notranslate"><span class="pre">01_extractBetas.sh</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># This script extracts the betas from the lipreading study for an MVPA analysis</span>

<span class="c1"># Extract the individual beta estimates for each trial</span>

<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span> <span class="n">stats_IM</span><span class="o">.</span><span class="n">dev03</span><span class="o">+</span><span class="n">tlrc</span><span class="s1">&#39;[1-233(2)]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span> <span class="n">stats_IM</span><span class="o">.</span><span class="n">dev03</span><span class="o">+</span><span class="n">tlrc</span><span class="s1">&#39;[236-468(2)]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span> <span class="n">stats_IM</span><span class="o">.</span><span class="n">dev03</span><span class="o">+</span><span class="n">tlrc</span><span class="s1">&#39;[471-703(2)]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span> <span class="n">stats_IM</span><span class="o">.</span><span class="n">dev03</span><span class="o">+</span><span class="n">tlrc</span><span class="s1">&#39;[706-938(2)]&#39;</span>

<span class="c1"># Extract each run&#39;s individual betas</span>

<span class="c1">### aud_phoneme ###</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[0-24]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[25-39]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[40-62]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run4_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[63-83]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[84-96]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_run6_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[97-116]&#39;</span>


<span class="c1">### aud_word ###</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[0-15]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[16-40]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[41-62]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run4_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[63-80]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[81-95]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_run6_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[96-116]&#39;</span>

<span class="c1">### vis_phoneme ###</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[0-18]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[19-36]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[37-53]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run4_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[54-76]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[77-103]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_run6_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[104-116]&#39;</span>

<span class="c1">### vis_word ###</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[0-17]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[18-37]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[38-53]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run4_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[54-69]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[70-92]&#39;</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_run6_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_allBetas</span><span class="o">.</span><span class="n">nii</span><span class="s1">&#39;[93-116]&#39;</span>
</pre></div>
</div>
</section>
<section id="creating-the-training-and-testing-datasets">
<h2>Creating the Training and Testing Datasets<a class="headerlink" href="#creating-the-training-and-testing-datasets" title="Link to this heading"></a></h2>
<p>Now that we have our betas separated by run, we can create a single training block and a single testing block, using the <code class="docutils literal notranslate"><span class="pre">3dTcat</span></code> command (in a script to be labeled <code class="docutils literal notranslate"><span class="pre">02_createTrainTestDatasets.sh</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># This script creates training and testing blocks for each condition</span>

<span class="c1"># First, extract the Betas for each condition for runs 1-4 and put them into a single training block</span>

<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run4_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run4_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run4_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run1_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run2_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run3_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run4_Betas</span><span class="o">.</span><span class="n">nii</span>

<span class="c1"># Then concatenate all of these training blocks into a single training block</span>

<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">trainBlock</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_Train</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_Train</span><span class="o">.</span><span class="n">nii</span>


<span class="c1"># Now create the testing set, consisting of the last two runs (5-6)</span>

<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_phoneme_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_run6_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">aud_word_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_run6_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_phoneme_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_run6_Betas</span><span class="o">.</span><span class="n">nii</span>
<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">vis_word_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run5_Betas</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_run6_Betas</span><span class="o">.</span><span class="n">nii</span>

<span class="c1"># And concatenate those into a single test block</span>

<span class="mi">3</span><span class="n">dTcat</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">testBlock</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_phoneme_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">aud_word_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_phoneme_Test</span><span class="o">.</span><span class="n">nii</span> <span class="n">vis_word_Test</span><span class="o">.</span><span class="n">nii</span>
</pre></div>
</div>
</section>
<section id="running-the-mvpa-test">
<h2>Running the MVPA Test<a class="headerlink" href="#running-the-mvpa-test" title="Link to this heading"></a></h2>
<p>Lastly, we will use AFNI’s <code class="docutils literal notranslate"><span class="pre">3dsvm</span></code> command to train a classifier, and then use that classifier to determine which condition an “unknown” beta belongs to (<code class="docutils literal notranslate"><span class="pre">03_TrainTestAlgorithm.sh</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="mi">3</span><span class="n">dsvm</span> <span class="o">-</span><span class="n">trainvol</span> <span class="n">trainBlock</span><span class="o">.</span><span class="n">nii</span> \
        <span class="o">-</span><span class="n">trainlabels</span> <span class="n">trainLabels</span><span class="mf">.1</span><span class="n">D</span> \
        <span class="o">-</span><span class="n">model</span> <span class="n">trainSet_noise</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">nii</span> \
        <span class="o">-</span><span class="n">mask</span> <span class="n">noiseROI</span><span class="o">.</span><span class="n">nii</span>

<span class="mi">3</span><span class="n">dsvm</span> <span class="o">-</span><span class="n">testvol</span> <span class="n">testBlock</span><span class="o">.</span><span class="n">nii</span> \
        <span class="o">-</span><span class="n">model</span> <span class="n">trainSet_noise</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">nii</span> \
        <span class="o">-</span><span class="n">classout</span> \
        <span class="o">-</span><span class="n">predictions</span> <span class="n">exemplar_noise</span>
</pre></div>
</div>
<p>In this example, I created a “noiseROI” located outside the brain; in this case, the classification accuracy should be around chance, or 25% (since there are 4 possible conditions in this dataset). The output, “exemplar_noise”, can be compared against the “trainLabels.1D” file. If the numbers are the same, it was a match; if they are different, then it was a misclassification. The correct classifications are summed up and divided by the total number of classifications that were performed, in order to obtain an overall classification accuracy for the condition in that ROI.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>