<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fMRIPrep Tutorial #6: Group Analysis &mdash; Andy&#39;s Brain Book 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Overview of Github" href="Github_Overview.html" />
    <link rel="prev" title="fMRIPrep Tutorial #5: Running the 1st-level Analysis" href="fMRIPrep_Demo_5_1stLevelAnalysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Andy's Brain Book
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/fsl_mac_install.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unix for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_Intro.html">What is Unix?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_01_Navigation.html">Unix Tutorial #1: 目录操作 (Directories and Navigation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_02_CopyRemove.html">Unix Tutorial #2: Copying and Removing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_03_ReadingTextFiles.html">Unix Tutorial #3: Reading Text Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_04_ShellsVariables.html">Unix Tutorial #4: Shells and Path Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_05_ForLoops.html">Unix Tutorial #5: For-Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_06_IfElse.html">Unix Tutorial #6: Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_07_Scripting.html">Unix Tutorial #7: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_08_Sed.html">Unix Tutorial #8: The Sed Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix/Unix_09_AutomatingTheAnalysis.html">Unix Tutorial #9: Automating The Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Short Course with FSL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_01_DataDownload.html">fMRI Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_02_ExperimentalDesign.html">fMRI Tutorial #2: Overview of The Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_03_LookingAtTheData.html">fMRI Tutorial #3: Looking at the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_04_Preprocessing.html">fMRI Tutorial #4: Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_05_1stLevelAnalysis.html">fMRI Tutorial #5: Statistics and Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_06_Scripting.html">fMRI Tutorial #6: Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_07_2ndLevelAnalysis.html">fMRI Tutorial #7: 2nd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_08_3rdLevelAnalysis.html">fMRI Tutorial #8: 3rd-Level Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_09_ROIAnalysis.html">fMRI Tutorial #9: ROI Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_10_Summary.html">fMRI Tutorial #10: Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fMRI_Short_Course/fMRI_Appendices.html">fMRI Short Course: Appendices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FreeSurfer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FreeSurfer/FreeSurfer_Introduction.html">FreeSurfer Short Course</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">E-Prime</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../E-Prime/E-Prime_Overview.html">Overview of E-Prime</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AFNI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AFNI/AFNI_Overview.html">AFNI Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SPM</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../SPM/SPM_Overview.html">SPM Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functional Connectivity with the CONN Toolbox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FunctionalConnectivity/CONN_Overview.html">Functional Connectivity and the CONN Toolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parametric Modulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PM/PM_Overview.html">Parametric Modulation in SPM, FSL, and AFNI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Image Visualization with MRIcroGL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRIcroGL/MRIcroGL_Overview.html">Image Visualization with MRIcroGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to the Human Connectome Project (HCP)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../HCP/HCP_Overview.html">Introduction to the Human Connectome Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finite Impulse Response (FIR) Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FIR/FIR_Overview.html">Finite Impulse Response (FIR)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">fMRI Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Practicals/DesignOptimization.html">Design Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Diffusion Analysis with MRtrix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MRtrix/MRtrix_Introduction.html">Introduction to MRtrix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ASL Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/ASL_Techniques.html">fASL Tutorial #1: Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_02_Download.html">fASL Tutorial #2: Downloading and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/fASL_03_Task.html">fASL Tutorial #3: The N-Back Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/04_fASL_GUI.html">fASL Tutorial #4: The GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/05_fASL_Results.html">fASL Tutorial #5: Examining the Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ASL/06_fASL_Quantification.html">fASL Tutorial #6: Quantification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Frequently Asked Questions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FrequentlyAskedQuestions/FrequentlyAskedQuestions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Statistics/GIMME.html">GIMME (Group Iterative Multiple Model Estimation)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Open Science</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../OS_Overview.html">Open Science</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="BIDS_Overview.html">BIDS Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="MRIQC.html">BIDS App Tutorial #1: MRIQC</a></li>
<li class="toctree-l2"><a class="reference internal" href="fMRIPrep.html">BIDS App Tutorial #2: fMRIPrep</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="fMRIPrep_Demo.html">fMRIPrep Demonstration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fMRIPrep_Demo_1_Download.html">fMRIPrep Tutorial #1: Downloading the Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="fMRIPrep_Demo_2_RunningAnalysis.html">fMRIPrep Tutorial #2: Running the Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="fMRIPrep_Demo_3_ExaminingPreprocData.html">fMRIPrep Tutorial #3: Examining the Preprocessed Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="fMRIPrep_Demo_4_AdditionalPreproc.html">fMRIPrep Tutorial #4: Additional Preprocessing Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="fMRIPrep_Demo_5_1stLevelAnalysis.html">fMRIPrep Tutorial #5: Running the 1st-level Analysis</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">fMRIPrep Tutorial #6: Group Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modifying-the-fmriprep-sh-script">Modifying the fmriprep.sh Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-for-loop">Running the for-loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-group-analysis">Running the Group Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#video">Video</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Github_Overview.html">Overview of Github</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Normalization Tools (ANTs)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ANTs/ANTs_Overview.html">Advanced Normalization Tools (ANTs)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tract-Based Spatial Statistics (TBSS)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../TBSS/TBSS_Overview.html">Introduction to Tract-Based Spatial Statistics (TBSS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Statistics for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Stats/Stats_Overview.html">Statistics for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Machine Learning for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ML/ML_Overview.html">Machine Learning for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Slicer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Slicer/Slicer_Overview.html">Slicer Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CAT12</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CAT12/CAT12_Overview.html">Voxel-Based Morphometry with CAT12</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Supercomputer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Supercomputer/Supercomputer_Overview.html">Introduction to Supercomputing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Matlab for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Matlab/Matlab_Overview.html">Matlab for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ITK-Snap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ITK-Snap/ITK-Snap_Overview.html">ITK-Snap_Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python for Neuroimagers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../PythonForNeuroimagers/PythonForNeuroimagers_Overview.html">Python for Neuroimagers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta-Analysis for fMRI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../MetaAnalysis/MetaAnalysis_Overview.html">Meta-Analysis for Neuroimagers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Andy's Brain Book</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../OS_Overview.html">Open Science</a></li>
          <li class="breadcrumb-item"><a href="fMRIPrep_Demo.html">fMRIPrep Demonstration</a></li>
      <li class="breadcrumb-item active">fMRIPrep Tutorial #6: Group Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/OpenScience/OS/fMRIPrep_Demo_6_GroupAnalysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fmriprep-tutorial-6-group-analysis">
<span id="fmriprep-demo-6-groupanalysis"></span><h1>fMRIPrep Tutorial #6: Group Analysis<a class="headerlink" href="#fmriprep-tutorial-6-group-analysis" title="Link to this heading"></a></h1>
<hr class="docutils" />
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Our group-level analysis requires that we preprocess all of the individual subjects and run 1st-level analyses for each of them. To do that, we will put our preprocessing and 1st-level analysis code in a for-loop.</p>
</section>
<section id="modifying-the-fmriprep-sh-script">
<h2>Modifying the fmriprep.sh Script<a class="headerlink" href="#modifying-the-fmriprep-sh-script" title="Link to this heading"></a></h2>
<p>Previously, we used the <code class="docutils literal notranslate"><span class="pre">fmriprep.sh</span></code> script that had a hard-coded subject number. To put this code into a for-loop, we will need to include this line of code just below the first line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>subject=$1
</pre></div>
</div>
<p>And modify the “subj” line to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>subj=$subject
</pre></div>
</div>
<p>You can make the changes yourself if you like, and save the file as <code class="docutils literal notranslate"><span class="pre">fmriprep_Scripted.sh</span></code>; otherwise, you can download the script for <a class="reference external" href="https://github.com/andrewjahn/OpenScience_Scripts/blob/master/fmriprep_Scripted.sh">here</a>. Also make sure to download the script <a class="reference external" href="https://github.com/andrewjahn/OpenScience_Scripts/blob/master/doDecon.sh">doDecon.sh</a> to your Flanker directory.</p>
</section>
<section id="running-the-for-loop">
<h2>Running the for-loop<a class="headerlink" href="#running-the-for-loop" title="Link to this heading"></a></h2>
<p>To create our for-loop, we will simply combine all of the code we ran in the previous chapters, making sure that they are in the correct order. Assuming that you already ran the script “make_Timings.sh”, you should already have a file in your Flanker directory called <code class="docutils literal notranslate"><span class="pre">subjList.txt</span></code>, which contains a list of all the subjects in your study.</p>
<p>The combined code will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>for i in `cat subjList.txt`; do
  cd code;
  bash fmriprep_Scripted.sh $i;
  cd ../derivatives/fmriprep/${i}/func
  for run in 1 2; do
    3dmerge -1blur_fwhm 4.0 -doall -prefix r${run}_blur.nii \
        ${i}_task-flanker_run-${run}_space-MNI152NLin2009cAsym_res-2_desc-preproc_bold.nii.gz;
    done
  for run in 1 2; do
    3dTstat -prefix rm.mean_r${run}.nii r${run}_blur.nii;
    3dcalc -a r${run}_blur.nii -b rm.mean_r${run}.nii \
       -c ${i}_task-flanker_run-${run}_space-MNI152NLin2009cAsym_res-2_desc-brain_mask.nii.gz                            \
       -expr &#39;c * min(200, a/b*100)*step(a)*step(b)&#39;       \
       -prefix r${run}_scale.nii;
    done
    rm rm*;
    3dmask_tool -inputs *mask.nii.gz -union -prefix full_mask.nii
  mkdir stimuli;
  cp ../../../../${i}/func/*.1D stimuli;
  cp ../../../../doDecon.sh .;
  for reg in trans_x trans_y trans_z rot_x rot_y rot_z; do
    for run in 1 2; do
     awk -v col=$reg &#39;NR==1{for(i=1;i&lt;=NF;i++){if($i==col){c=i;break}} print $c} NR&gt;1{print $c}&#39; ${i}_task-flanker_run-${run}_desc-confounds_regressors.tsv &gt; ${reg}_run${run}_all_tmp.txt;
     sed &#39;1d&#39; ${reg}_run${run}_all_tmp.txt &gt; ${reg}_run${run}_noHead_tmp.txt
     sed &#39;1!d&#39; ${reg}_run${run}_all_tmp.txt &gt; ${reg}_run${run}_Head_tmp.txt
    done
  done
  NT=`3dinfo -nt r1_scale.nii`
  if [ -f zeros_tmp.txt ]; then rm zeros_tmp.txt; fi
  for ((j=0; j&lt;$NT; j++)); do echo 0 &gt;&gt; zeros_tmp.txt; done
  for reg in trans_x trans_y trans_z rot_x rot_y rot_z; do
    for run in 1 2; do
      if [ $run -eq 1 ]; then
        cat ${reg}_run${run}_noHead_tmp.txt &gt; ${reg}_run${run}.txt
      else
        cat zeros_tmp.txt ${reg}_run${run}_noHead_tmp.txt &gt; ${reg}_run${run}.txt
      fi
    done
  done
  rm *tmp*
  tcsh doDecon.sh $i
  cd ../../../..
done
</pre></div>
</div>
<p>Each block of this code is discussed in the previous chapters; the only difference is that we now use variables for input where appropriate. You can either copy and paste this code into the Terminal while in the Flanker directory, or download <a class="reference external" href="https://github.com/andrewjahn/OpenScience_Scripts/blob/master/script_fMRIPrep_Analysis.sh">this script</a> from Andy’s GitHub page (again, making sure to run it from the Flanker directory). This will take a long time to run - maybe a few days, depending on the speed of your computer.</p>
</section>
<section id="running-the-group-analysis">
<h2>Running the Group Analysis<a class="headerlink" href="#running-the-group-analysis" title="Link to this heading"></a></h2>
<p>When the script has finished, do the same quality assurance checks that we covered in the previous chapters. If everything looks OK, then we are ready to do a group-level analysis using the same approach as in the <a class="reference internal" href="../../AFNI/AFNI_Short_Course/AFNI_07_GroupAnalysis.html#afni-07-groupanalysis"><span class="std std-ref">AFNI tutorial</span></a>. The code will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash -xef

dirA=derivatives/fmriprep

# specify and possibly create results directory
results_dir=test.results
if [ ! -d $results_dir ]; then mkdir $results_dir; fi

# ------------------------- process the data -------------------------

3dttest++ -prefix $results_dir/Flanker-Inc-Con                     \
          -setA Inc-Con                                            \
             01 &quot;$dirA/sub-01/func/stats.sub-01+tlrc[7]&quot; \
             02 &quot;$dirA/sub-02/func/stats.sub-02+tlrc[7]&quot; \
             03 &quot;$dirA/sub-03/func/stats.sub-03+tlrc[7]&quot; \
             04 &quot;$dirA/sub-04/func/stats.sub-04+tlrc[7]&quot; \
             05 &quot;$dirA/sub-05/func/stats.sub-05+tlrc[7]&quot; \
             06 &quot;$dirA/sub-06/func/stats.sub-06+tlrc[7]&quot; \
             07 &quot;$dirA/sub-07/func/stats.sub-07+tlrc[7]&quot; \
             08 &quot;$dirA/sub-08/func/stats.sub-08+tlrc[7]&quot; \
             09 &quot;$dirA/sub-09/func/stats.sub-09+tlrc[7]&quot; \
             10 &quot;$dirA/sub-10/func/stats.sub-10+tlrc[7]&quot; \
             11 &quot;$dirA/sub-11/func/stats.sub-11+tlrc[7]&quot; \
             12 &quot;$dirA/sub-12/func/stats.sub-12+tlrc[7]&quot; \
             13 &quot;$dirA/sub-13/func/stats.sub-13+tlrc[7]&quot; \
             14 &quot;$dirA/sub-14/func/stats.sub-14+tlrc[7]&quot; \
             15 &quot;$dirA/sub-15/func/stats.sub-15+tlrc[7]&quot; \
             16 &quot;$dirA/sub-16/func/stats.sub-16+tlrc[7]&quot; \
             17 &quot;$dirA/sub-17/func/stats.sub-17+tlrc[7]&quot; \
             18 &quot;$dirA/sub-18/func/stats.sub-18+tlrc[7]&quot; \
             19 &quot;$dirA/sub-19/func/stats.sub-19+tlrc[7]&quot; \
             20 &quot;$dirA/sub-20/func/stats.sub-20+tlrc[7]&quot; \
             21 &quot;$dirA/sub-21/func/stats.sub-21+tlrc[7]&quot; \
             22 &quot;$dirA/sub-22/func/stats.sub-22+tlrc[7]&quot; \
             23 &quot;$dirA/sub-23/func/stats.sub-23+tlrc[7]&quot; \
             24 &quot;$dirA/sub-24/func/stats.sub-24+tlrc[7]&quot; \
             25 &quot;$dirA/sub-25/func/stats.sub-25+tlrc[7]&quot; \
             26 &quot;$dirA/sub-26/func/stats.sub-26+tlrc[7]&quot;
</pre></div>
</div>
<p>As explained in the AFNI group analysis chapter, this code will run a one-sample t-test on the Inc-Con beta weights from each subject’s stats file. The output will be placed in the folder <code class="docutils literal notranslate"><span class="pre">test.results</span></code>, and you can examine them in the AFNI viewer:</p>
<figure class="align-default">
<img alt="../../_images/06_GroupResults_fMRIPrep.png" src="../../_images/06_GroupResults_fMRIPrep.png" />
</figure>
<p>Compared to the results from AFNI, the cluster appears to be slightly larger, and with a higher peak:</p>
<figure class="align-default">
<img alt="../../_images/06_GroupResults_AFNI.png" src="../../_images/06_GroupResults_AFNI.png" />
</figure>
<p>As you can see, the basic pattern of the results did not change, but the results did appear to get slightly stronger.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>Now that we have seen how fMRIPrep can improve our results, we can take a closer look at some of the advanced options, which we will cover in the next chapter.</p>
</section>
<section id="video">
<h2>Video<a class="headerlink" href="#video" title="Link to this heading"></a></h2>
<p>For a video demonstration of scripting and group analysis, click <a class="reference external" href="https://www.youtube.com/watch?v=JBf7HFQZ6gw">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fMRIPrep_Demo_5_1stLevelAnalysis.html" class="btn btn-neutral float-left" title="fMRIPrep Tutorial #5: Running the 1st-level Analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Github_Overview.html" class="btn btn-neutral float-right" title="Overview of Github" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy Jahn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>